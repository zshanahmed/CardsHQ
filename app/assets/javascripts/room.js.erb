pusher = new Pusher('<%= ENV["PUSHER_KEY"] %>', {
    cluster: '<%= ENV["PUSHER_CLUSTER"] %>',
    encrypted: true
});
var channel = pusher.subscribe('new');
channel.bind('new-action', function(data){
    out_string = data.username + " " + data.action + ":\n";
    html_string = "";
    for(i = 0; i < data.info.length; i++)
    {
        out_string = out_string + data.info[i][0] + " of " + data.info[i][1] + "\n";
        html_string = "<tr><td>" +data.username+"</td>";
        <%= name = data.info[i][0][0] + data.info[i][1][0] + '.png'%>
        if(data.action != "discarded") {
            if (data.info[i][1] == 'Diamond' && data.info[i][0] == 'Ace') {
                name = 'AD1.png';
                console.info(name);
            } else {
                  console.info(name);
            }
            row_string = '<td><%=image_tag(src = "#{name}", width: '80', height: '122') %></td></tr>';
            $("#played_cards tbody").prepend(html_string +row_string );
        }

    }
    alert(out_string);

});